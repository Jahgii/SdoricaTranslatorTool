@if ((hiddenScroll$ | async) && (groupSelected$ | async)) {
<tui-svg src="tuiIconArrowRight" class="hidden-arrow"></tui-svg>
}

<tui-scrollbar #scrollbar class="group-tree" [hidden]="(hiddenScroll$ | async) === true"
    [ngClass]="{'group-tree-hide': groupSelected$ | async}" (mouseenter)="onMouseEnter()" (mouseleave)="onMouseLeave()">

    <tui-elastic-container>
        @for (node of treeNodes$ | async; track $index) {
        <ng-container [ngTemplateOutlet]="nodeTemplate" [ngTemplateOutletContext]="{$implicit: node}"></ng-container>
        }
    </tui-elastic-container>
</tui-scrollbar>

<ng-template #nodeTemplate let-node>
    <div style="position: relative;">
        <div class="tree"
            (click)="node.children? node.expanded = !node.expanded : onSelectGroup(node.MainGroup, node.OriginalName)">
            <div class="tree-content">
                <div class="tree-left-content">
                    <tui-svg class="tui-space_right-2" [src]="node.children?'tuiIconFolder': 'tuiIconFile'"></tui-svg>
                    <div class="tree-name tui-space_right-2">
                        <tui-input-inline #input [(ngModel)]="node.Name" [class.input_empty]="!input.value"
                            (click)="$event.stopPropagation()" (focusedChange)="onFocusName($event, input, node)">
                            {{node.OriginalName}}
                        </tui-input-inline>
                    </div>
                </div>
                <div class="tree-right-content">
                    @if((node.TranslatedFiles / node.Files) < 1){ <span class="tree-status">
                        [{{ node.TranslatedFiles }} /{{node.Files }}]
                        </span>
                        } @else {
                        <tui-svg src="tuiIconCheckCircle"></tui-svg>
                        }
                </div>
            </div>
        </div>
        @if (node.saving | async) {
        <progress class="tree-progress-bar" max="100" tuiProgressBar></progress>
        }
    </div>
    @for (childNode of node.children; track $index) {
    <tui-expand class="tui-space_left-6" [expanded]="node.expanded ?? false">
        <ng-container [ngTemplateOutlet]="nodeTemplate" [ngTemplateOutletContext]="{$implicit: childNode}">
        </ng-container>
    </tui-expand>
    }
</ng-template>

<div style="display: flex;">
    <div style="width: 2rem;"></div>
    <app-dialog-assets style="width: 100%;"></app-dialog-assets>
</div>